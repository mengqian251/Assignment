<!DOCTYPE html>
<meta charset="utf-8">
<head>
      <title> Social Network and Geospatial</title>
</head>
<style>


.link {
  stroke: #bd7112;
  stroke-opacity: 0.65;
}

.node text {
  pointer-events: none;
  font: 10px sans-serif;
}

</style>
<body>
     <text></text>
     <text></text>
     <text></text>
     <text></text>
     <text></text>
     <text></text>

     
<script src="https://d3js.org/d3.v3.min.js"></script>
<link rel="stylesheet" type="text/css" href="t1.css">
<script>

var width = 1000,
    height = 650,
    shift = 140,
    length_rate = 10;


var elementSize = [16, 14, 12, 12, 9, 11];
var color = ["Red", "Green", "Orange", "yellow", "Blue", "Purple"]; 
var clas = ["Employee", "Handler", "Middleman", "Boss", "International Contacts", "Another organization member"];



var data = [4, 1, 6, 2, 8, 9];
    var body = d3.select("body")
                 .selectAll("span")
                 .data(data)
                 .enter().append("span")
                 .style('color', function(d) {
                     if (d % 2 === 0) {
                         return "green";
                     } else {
                         return "red";
                     }
                 })
                 .text(function(d) { return d + " "; });

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);



              

svg.append("circle")
   .attr("cx", 100)
   .attr("cy", 200)
   .attr("r", 30)
   .attr("fill", "red")

for (i = 0; i < 6; i++) {
     var text = svg.append("text")
              .attr("x", 30)
              .attr("y", 50 + i * 25)
              .text("circle");
}


var force = d3.layout.force()
    .linkDistance(40)
    .gravity(0.1)
    .distance(function(link) {
              if (link.value === 2) {
                return 50;
              } else if (link.value === 5) {
                return 80;
              } else if (link.value === 6) {
                return 100;
              } else {
                return 140;
              }
    })
    .charge(0)
    .size([width, height]);

d3.json("links.json", function(error, json) {
 if (error) throw error;


  force
      .nodes(json.nodes)
      .links(json.links)
      .start();

  var link = svg.selectAll(".link")
      .data(json.links)
    .enter().append("line")
      .attr("id", function() {
        return json.links
      })
      .attr("class", "link");

  var node = svg.selectAll(".node")
      .data(json.nodes)
    .enter().append("g")
      .attr("class", "node")
      .call(force.drag);

  // dui name
  /*d3.selectAll(".node")
    .on("mouseover", function() {
       d3.select(this)
         .style("fill", "yellow")
    });*/
  

  /*node.append("image")
      .attr("xlink:href", "https://github.com/favicon.ico")
      .attr("x", -8)
      .attr("y", -8)
      .attr("width", 16)
      .attr("height", 16);*/

  node.append("circle")
        .attr("cx", 0)
        .attr("cy", 0)
        .attr("r", function(d) { // Set the size here
             return elementSize[d.group -1];
        })
        .attr("opacity", 0.95)
        .attr("class", "circle")
        .attr("id", function (d) {
              return d.group;
        })
        // !!!Here change the color of the person ---- 1
        .attr("fill", function(d) {
               return color[d.group -1];
        });

      node.append("text")
      .attr("dx", 12)
      .attr("dy", ".35em")
      .text(function(d) { return d.id });


  d3.selectAll(".circle")
    .on("mouseover", function() {
       d3.select(this)
         .transition()
         .duration(200)
         .attr("r", function() {
              if (this.getAttribute("r") >= 14) {
                  return this.getAttribute("r") * 1.5;
              } else {
                  return this.getAttribute("r") * 2.5;
              }
         })
    })
    .on("mouseout", function() {
      d3.select(this)
        .transition()
        .duration(100)
        .attr("r", elementSize[this.getAttribute("id") - 1])
    });
    /*.on("click", function() {
      d3.select(this)
        .transition()
        .duration(50)
        .attr("")
    })*/
 

  // update the postion of node and links
  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x + shift; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x + shift; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("transform", function(d) { return "translate(" + (d.x + shift) + "," + (d.y) + ")"; });
  });

});



</script>